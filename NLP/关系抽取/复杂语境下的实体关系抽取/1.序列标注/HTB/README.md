# A Novel Cascade Binary Tagging Framework for Relational Triple Extraction

# 一种用于关系三重提取的新型级联二进制标记框架



##  摘要

从非结构化文本中提取关系三元组对于大规模知识图谱构建至关重要。然而，很少有现有作品擅长解决重叠三元组问题，即同一句子中的多个关系三元组共享相同的实体。在这项工作中，我们引入了一个新的视角来重新审视关系三元组提取任务，并提出了一种从原则问题公式推导出来的新型级联二进制标记框架 (CASREL)。我们的新框架不像以前的工作那样将关系视为离散标签，而是将关系建模为将主语映射到句子中的宾语的函数，这自然地处理了重叠问题。 实验表明，即使其编码器模块使用随机初始化的 BERT 编码器，CASREL 框架也已经优于最先进的方法，显示了新标记框架的强大功能。当采用预训练的 BERT 编码器时，它的性能进一步提升，在两个公共数据集 NYT 和 WebNLG 上的 F1 分数绝对增益分别超过最强基线 17.5 和 30.2。 对重叠三元组的不同场景的深入分析表明，该方法在所有这些场景中都提供了一致的性能增益。 源代码和数据在线发布1。

## 1 前言

知识图谱的关键成分是关系事实，其中大部分由通过语义关系连接的两个实体组成。 这些事实的形式是（主语、关系、客体）或（s, r, o），称为关系三元组。 从自然语言文本中提取关系三元组是构建大规模知识图谱的关键一步。

![](https://gitee.com/Xiaoyingzi09/note-book/raw/master/NLP/%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/%E5%A4%8D%E6%9D%82%E8%AF%AD%E5%A2%83%E4%B8%8B%E7%9A%84%E5%AE%9E%E4%BD%93%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/1.%E5%BA%8F%E5%88%97%E6%A0%87%E6%B3%A8/HTB/figure/figure_1.png)

图 1：Normal、EntityPairOverlap (EPO) 和 SingleEntityOverlap (SEO) 重叠模式的示例。

关系三重提取的早期工作采用了流水线方法（Zelenko 等人，2003 年；Zhou 等人，2005 年；Chan 和 Roth，2011 年）。 它首先识别句子中的所有实体，然后对每个实体对进行关系分类。 这种方法往往会遇到错误传播问题，因为早期阶段的错误无法在后期纠正。 为了解决这个问题，后续工作提出了实体和关系的联合学习，其中包括基于特征的模型（Yu 和 Lam，2010；Li 和 Ji，2014；Miwa 和 Sasaki，2014；Ren 等，2017）和， 最近，基于神经网络的模型（Gupta 等人，2016 年；Katiyar 和 Cardie，2017 年；Zheng 等人，2017 年；Zeng 等人，2018 年；Fu 等人，2019 年）。 通过用学习的表征替换人工构建的特征，基于神经网络的模型在三重提取任务中取得了相当大的成功。

然而，大多数现有方法无法有效处理句子包含多个相互重叠的关系三元组的场景。 图 1 说明了这些场景，其中三元组在一个句子中共享一个或两个实体。 这个重叠的三重问题直接挑战了传统的序列标记方案，假设每个标记只带有一个标签（Zheng 等，2017）。 这也给关系分类方法带来了很大的困难，其中实体

然而，大多数现有方法无法有效处理句子包含多个相互重叠的关系三元组的场景。 图 1 说明了这些场景，其中三元组在一个句子中共享一个或两个实体。 这个重叠的三重问题直接挑战了传统的序列标记方案，假设每个标记只带有一个标签（Zheng 等，2017）。 这也给关系分类方法带来了很大的困难，其中假设实体对最多持有一个关系（Miwa 和 Bansal，2016 年）。 曾等人。  (2018) 是最早在关系三元组提取中考虑重叠三元组问题的人之一。 他们介绍了不同重叠模式的类别，如图 1 所示，并提出了一种具有复制机制的序列到序列 (Seq2Seq) 模型来提取三元组。 基于 Seq2Seq 模型，他们进一步研究了提取顺序的影响 (Zeng et al., 2019) 并通过强化学习获得了相当大的改进。 傅等人。  (2019) 还通过使用基于图卷积网络 (GCN) 的模型将文本建模为关系图来研究重叠三元组问题。

尽管取得了成功，但之前提取重叠三元组的工作仍有很多不足之处。 具体来说，它们都将关系视为要分配给实体对的离散标签。 这种公式使关系分类成为一个困难的机器学习问题。 首先，类别分布高度不平衡。 在所有提取的实体对中，大多数没有形成有效的关系，产生了太多的反例。 其次，当同一实体参与多个有效关系（重叠三元组）时，分类器可能会混淆。 如果没有足够的训练样本，分类器很难判断实体参与了哪个关系。因此，提取的三元组通常是不完整和不准确的。

在这项工作中，我们从三元级别的关系三元提取的原则性公式开始。 这产生了通过设计处理重叠三元组问题的通用算法框架。 该框架的核心是全新的观点，即我们可以将关系建模为将主体映射到客体的函数，而不是将关系视为实体对上的离散标签。 更准确地说，我们不是学习关系分类器 f(s, o) → r，而是学习特定关系标记器 fr(s) → o，每个标记器都识别特定关系下给定主题的可能对象； 或不返回任何对象，表示没有给定主题和关系的三元组。 在这个框架下，三重抽取是一个两步过程：首先我们识别一个句子中所有可能的主语； 然后对于每个主题，我们应用特定关系标记器来同时识别所有可能的关系和相应的对象。

我们在 CASREL 中实现了上述想法，这是一个端到端的级联二进制标记框架。 它由一个基于 BERT 的编码器模块、一个主题标记模块和一个特定于关系的对象标记模块组成。 实证实验表明，即使未对 BERT 编码器进行预训练，所提出的框架也大大优于最先进的方法，显示出新框架本身的优越性。 在采用预训练的 BERT 编码器后，该框架获得了更大的性能提升，显示了丰富的先验知识在三重提取任务中的重要性。
   这项工作有以下主要贡献：

1. 我们引入了一个新的视角来重新审视具有原则性问题的关系三元组提取任务，这意味着一个通用的算法框架，可以通过设计解决重叠的三元组问题。
2. 我们将上述框架实例化为一个位于 Transformer 编码器之上的新型级联二进制标记模型。 这允许模型将新颖的标记框架的强大功能与预训练的大规模语言模型中的先验知识相结合。
3. 在两个公共数据集上的大量实验表明，所提出的框架压倒性地优于最先进的方法，在两个数据集上的 F1 分数分别获得了 17.5 和 30.2 的绝对增益。详细分析表明，我们的模型在所有场景中都获得了一致的改进。

## 2 相关工作

从非结构化自然语言文本中提取关系三元组是信息提取 (IE) 中一项经过充分研究的任务。 它也是构建大规模知识图谱（KG）的重要步骤，例如 DBpedia（Auer 等，2007）、Freebase（Bollacker 等，2008）和 Knowledge Vault（Dong 等，2014）。

早期工作（Mintz 等人，2009 年；Gormley 等人，2015 年）以流水线方式处理任务。 他们通过两个单独的步骤提取关系三元组：1）首先对输入句子运行命名实体识别（NER）以识别所有实体，2）然后对提取的实体对运行关系分类（RC）。 流水线方法通常会遇到错误传播问题并且忽略了两个步骤之间的相关性。 为了缓解这些问题，已经提出了许多旨在共同学习实体和关系的联合模型。 传统的联合模型（Yu 和 Lam，2010；Li 和 Ji，2014；Miwa 和 Sasaki，2014；Ren 等，2017）是基于特征的，严重依赖特征工程，需要大量的人工工作。
   为了减少手动工作，最近的研究调查了基于神经网络的方法，这些方法提供了最先进的性能。 然而，大多数现有的神经模型（如（Miwa 和 Bansal，2016）仅通过参数共享而非联合解码来实现实体和关系的联合学习。 为了获得关系三元组，他们仍然必须将检测到的实体对通过管道传输到关系分类器，以识别实体之间的关系。
   分离的解码设置导致实体和关系的训练目标分离，这带来了无法充分利用预测实体和关系之间的三层依赖关系的缺点。 与这些作品不同的是，郑等人。  (2017) 通过引入统一标记方案实现联合解码，并将关系三元组提取任务转换为端到端序列标记问题，无需 NER 或 RC。 由于实体和关系的信息被集成到统一的标记方案中，所提出的方法可以在三元组级别直接将关系三元组建模为一个整体。

尽管联合模型（有或没有联合解码）已经得到很好的研究，但大多数以前的工作都忽略了重叠关系三元组的问题。 曾等人。  (2018) 介绍了三种重叠三元组模式，并尝试通过具有复制机制的序列到序列模型来解决该问题。 最近，傅等人。  (2019) 也研究了这个问题并提出了一种基于图卷积网络 (GCN) 的方法。 尽管最初取得了成功，但这两种方法仍将关系视为实体对的离散标签，这使得模型很难学习重叠的三元组。

我们的框架基于一个训练目标，该目标经过精心设计，可以像 (Zheng et al., 2017) 那样直接对关系三元组进行整体建模，即通过联合解码来学习实体和关系。 此外，我们将关系建模为将主体映射到对象的函数，这使其与以前的作品截然不同。

## 3 CASREL框架

关系三元组提取的目标是识别句子中所有可能的（主语、关系、宾语）三元组，其中一些三元组可能与主语或宾语共享相同的实体。 为了这个目标，我们直接对三元组进行建模，并在三元组层面设计一个训练目标。 这与之前的方法（Fu et al., 2019）形成对比，其中训练目标是为实体和关系单独定义的，而没有在三重级别上对其集成进行明确建模。正式地，给定来自训练集 D 的带注释的句子 xj 和一组可能重叠的三元组 Tj = {(s, r, o)} 在 xj 中，我们的目标是最大化训练集 D 的数据可能性：

![](https://gitee.com/Xiaoyingzi09/note-book/raw/master/NLP/%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/%E5%A4%8D%E6%9D%82%E8%AF%AD%E5%A2%83%E4%B8%8B%E7%9A%84%E5%AE%9E%E4%BD%93%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/1.%E5%BA%8F%E5%88%97%E6%A0%87%E6%B3%A8/HTB/figure/formula_1.png)

这里我们稍微滥用了符号 Tj。  s ∈ Tj 表示一个主题出现在 Tj 的三元组中。Tj|s 是 Tj 中由主题 s 引导的三元组的集合。(r, o) ∈ Tj|s 是 Tj 中主题 s 领导的三元组中的 (r, o) 对。  R 是所有可能关系的集合。R\Tj|s 表示除 Tj 中由 s 领导的关系之外的所有关系。  o∅ 表示一个“空”对象（解释如下）。

等式 (2) 应用概率链式法则。等式 (3) 利用了一个关键事实，即对于给定的主语 s，任何与 s 相关的关系（那些在 Tj|s 中的关系）都将导致句子中相应的宾语，而所有其他关系在句子中必然没有宾语，即 “空”对象。

这种配方提供了几个好处。 首先，由于数据似然是从三元层开始的，优化这个似然对应于直接优化三元层的最终评价标准。 其次，通过不假设多个三元组如何在一个句子中共享实体，它通过设计处理了重叠的三元组问题。第三，方程中的分解。  (3) 启发了一种新的三元提取标注方案：我们学习了一个识别句子中主语实体的主语标注器 p(s|xj)； 对于每个关系 r，我们学习了一个对象标记器 pr(o|s, xj)，它识别给定主题的特定关系对象。 通过这种方式，我们可以将每个关系建模为一个将主体映射到客体的函数，而不是对（主体、客体）对的关系进行分类。

事实上，这种新颖的标记方案允许我们一次提取多个三元组：我们首先运行主题标记器以查找句子中所有可能的主题，然后对于找到的每个主题，应用特定于关系的对象标记器来查找所有相关关系和 对应的对象。

上述通用框架中的关键组件，即主题标注器和特定关系的对象标注器，可以通过多种方式实例化。在本文中，我们在深度双向 Transformer BERT（Devlin 等人，2019）之上将它们实例化为二进制标记器。 我们在下面描述它的细节。

#### 3.1 BERT编码器



































